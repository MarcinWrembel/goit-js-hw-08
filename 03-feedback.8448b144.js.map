{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MACMC,EAAOC,SAASC,cAAc,sBAC9BC,EAAoBF,SAASC,cAAc,uBAC3CE,EAAsBH,SAASC,cAAc,4BACnD,IAAIG,EACAC,EAEJ,MASMC,EAAkBC,IACtB,IACE,MAAMC,EAAaC,aAAaC,QAAQH,GACxC,OAAsB,OAAfC,OAAsBG,EAAYC,KAAKC,MAAML,E,CACpD,MAAOM,GACPC,QAAQD,MAAM,kBAAmBA,EAAME,Q,QAGAL,IAAvCL,EAxBsB,yBAyBxBF,EAAeE,EAzBS,uBAyB0BW,MAClDZ,EAAiBC,EA1BO,uBA0B4BU,QAE9CZ,IACJF,EAAkBgB,MAAQd,GAEtBC,IACJF,EAAoBe,MAAQb,IA+BhCN,EAAKoB,iBAAiB,QAASC,EAAAvB,EAAA,EA3B/B,SAAsBwB,GACpB,MACEC,UAAUL,MAAEA,EAAKD,QAAEA,IACjBK,EAAME,cAEJC,EAAa,CACjBP,MAAOA,EAAMC,MACbF,QAASA,EAAQE,OApCG,EAACX,EAAKW,KAC5B,IACE,MAAMO,EAAcb,KAAKc,UAAUR,GACnCT,aAAakB,QAAQpB,EAAKkB,E,CAC1B,MAAOX,GACPC,QAAQD,MAAM,mBAAoBA,EAAME,Q,GAkC1CY,CA9CwB,sBA8CWJ,GACnCpB,EAAeoB,EAAWP,MAC1BZ,EAAiBmB,EAAWR,O,GAeuB,MACrDjB,EAAKoB,iBAAiB,UAbtB,SAAoBE,GAClBA,EAAMQ,iBACNR,EAAME,cAAcO,QAEpBf,QAAQgB,IACN,iBAAiB3B,2BAAoCC,gBAA+BI,aAAEC,QAxDhE,2BA4DxBD,aAAauB,O","sources":["src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash/throttle';\n\nconst KEY_LOCAL_STORAGE = 'feedback-form-state';\nconst form = document.querySelector('form.feedback-form');\nconst EmailInputDefault = document.querySelector('input[type=\"email\"]');\nconst MessageInputDeafult = document.querySelector('textarea[name=\"message\"]');\nlet emailStorage;\nlet messageStorage;\n\nconst setLocalStorage = (key, value) => {\n  try {\n    const valueToSave = JSON.stringify(value);\n    localStorage.setItem(key, valueToSave);\n  } catch (error) {\n    console.error('Set state error:', error.message);\n  }\n};\n\nconst getLocalStorage = key => {\n  try {\n    const valueSaved = localStorage.getItem(key);\n    return valueSaved === null ? undefined : JSON.parse(valueSaved);\n  } catch (error) {\n    console.error('Get state error', error.message);\n  }\n};\nif (getLocalStorage(KEY_LOCAL_STORAGE) !== undefined) {\n  emailStorage = getLocalStorage(KEY_LOCAL_STORAGE).email;\n  messageStorage = getLocalStorage(KEY_LOCAL_STORAGE).message;\n\n  if (!!emailStorage) {\n    EmailInputDefault.value = emailStorage;\n  }\n  if (!!messageStorage) {\n    MessageInputDeafult.value = messageStorage;\n  }\n}\n\nfunction valueHandler(event) {\n  const {\n    elements: { email, message },\n  } = event.currentTarget;\n\n  const dataToSave = {\n    email: email.value,\n    message: message.value,\n  };\n\n  setLocalStorage(KEY_LOCAL_STORAGE, dataToSave);\n  emailStorage = dataToSave.email;\n  messageStorage = dataToSave.message;\n}\n\nfunction formSubmit(event) {\n  event.preventDefault();\n  event.currentTarget.reset();\n  //localStorage.removeItem(KEY_LOCAL_STORAGE);\n  console.log(\n    `to jest mail: ${emailStorage}, \\nto jest wiadomość: ${messageStorage}, \\nobiekt: ${localStorage.getItem(\n      KEY_LOCAL_STORAGE\n    )} `\n  );\n  localStorage.clear();\n}\n\nform.addEventListener('input', throttle(valueHandler,500));\nform.addEventListener('submit', formSubmit);\n\n/*\nW HTML znajduje się znacznik formularza. Napisz skrypt, który będzie zapisywał wartości pól w local storage, gdy użytkownik coś wpisuje.\n\n<form class=\"feedback-form\" autocomplete=\"off\">\n  <label>\n    Email\n    <input type=\"email\" name=\"email\" autofocus />\n  </label>\n  <label>\n    Message\n    <textarea name=\"message\" rows=\"8\"></textarea>\n  </label>\n  <button type=\"submit\">Submit</button>\n</form>\n\nWykonuj to zadanie w plikach 03-feedback.html i 03-feedback.js. Rozbij je na kilka podzadań:\n\nŚledź w formularzu zdarzenie input, i za każdym razem zapisuj w local storage obiekt z polami email i message, w których przechowuj aktualne wartości pól formularza. Niech kluczem do storage będzie \"feedback-form-state\".\nPodczas przeładowywania strony sprawdzaj stan storage i jeśli są tam zapisane dane, wypełniaj nimi pola formularza. W przeciwnym wypadku pola powinny być puste.\nPo wysłaniu formularza wyczyść storage i pola formularza, a także wprowadź obiekt z polami email, message i ich aktualnymi wartościami do wiersza poleceń.\nZrób tak, aby storage aktualizował się nie częściej niż raz na 500 milisekund. Aby to zrobić, użyj biblioteki lodash.throttle i dodaj ją do projektu\n*/\n"],"names":["$8zd4h","parcelRequire","$945622fd0f572e60$var$form","document","querySelector","$945622fd0f572e60$var$EmailInputDefault","$945622fd0f572e60$var$MessageInputDeafult","$945622fd0f572e60$var$emailStorage","$945622fd0f572e60$var$messageStorage","$945622fd0f572e60$var$getLocalStorage","key","valueSaved","localStorage","getItem","undefined","JSON","parse","error","console","message","email","value","addEventListener","$parcel$interopDefault","event","elements","currentTarget","dataToSave","valueToSave","stringify","setItem","$945622fd0f572e60$var$setLocalStorage","preventDefault","reset","log","clear"],"version":3,"file":"03-feedback.8448b144.js.map"}