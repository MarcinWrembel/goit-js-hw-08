{"mappings":"iiBAAA,IAMIA,EACAC,EAPJC,EAAAC,EAAA,SAEMC,EAAoB,sBACpBC,EAAOC,SAASC,cAAc,sBAC9BC,EAAoBF,SAASC,cAAc,uBAC3CE,EAAsBH,SAASC,cAAc,4BAanD,SAASG,EAAgBC,GACvB,IACE,IAAMC,EAAaC,aAAaC,QAAQH,GACxC,OAAsB,OAAfC,OAAsBG,EAAYC,KAAKC,MAAML,E,CACpD,MAAOM,GACPC,QAAQD,MAAM,kBAAmBA,EAAME,Q,OAGAL,IAAvCL,EAAgBN,KAClBJ,EAAeU,EAAgBN,GAAmBiB,MAClDpB,EAAiBS,EAAgBN,GAAmBgB,QAE9CpB,IACJQ,EAAkBc,MAAQtB,GAEtBC,IACJQ,EAAoBa,MAAQrB,IA2BhCI,EAAKkB,iBAAiB,QAASC,EAAAtB,EAAA,EAxB/B,WAEE,IAAMuB,EAAa,CACjBJ,MAAOb,EAAkBc,MACzBF,QAASX,EAAoBa,QAhCjC,SAAyBA,GACvB,IACE,IAAMI,EAAcV,KAAKW,UAAUL,GACnCT,aAAae,QAAQxB,EAAmBsB,E,CACxC,MAAOR,GACPC,QAAQD,MAAM,mBAAoBA,EAAME,Q,EA8B1CS,CAAgBJ,GAChBzB,EAAeyB,EAAWJ,MAC1BpB,EAAiBwB,EAAWL,O,GAewB,MACtDf,EAAKkB,iBAAiB,UAbtB,SAAoBO,GAClBA,EAAMC,iBACND,EAAME,cAAcC,QAEpBd,QAAQe,IACN,iBAAuDC,OAAtCnC,EAAa,2BAAwDmC,OAA7BlC,EAAe,gBAEtEkC,OAFoFtB,aAAaC,QACjGV,GACA,MAEJS,aAAauB,O","sources":["src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash/throttle';\n\nconst KEY_LOCAL_STORAGE = 'feedback-form-state';\nconst form = document.querySelector('form.feedback-form');\nconst EmailInputDefault = document.querySelector('input[type=\"email\"]');\nconst MessageInputDeafult = document.querySelector('textarea[name=\"message\"]');\nlet emailStorage;\nlet messageStorage;\n\nfunction setLocalStorage(value) {\n  try {\n    const valueToSave = JSON.stringify(value);\n    localStorage.setItem(KEY_LOCAL_STORAGE, valueToSave);\n  } catch (error) {\n    console.error('Set state error:', error.message);\n  }\n}\n\nfunction getLocalStorage(key) {\n  try {\n    const valueSaved = localStorage.getItem(key);\n    return valueSaved === null ? undefined : JSON.parse(valueSaved);\n  } catch (error) {\n    console.error('Get state error', error.message);\n  }\n}\nif (getLocalStorage(KEY_LOCAL_STORAGE) !== undefined) {\n  emailStorage = getLocalStorage(KEY_LOCAL_STORAGE).email;\n  messageStorage = getLocalStorage(KEY_LOCAL_STORAGE).message;\n\n  if (!!emailStorage) {\n    EmailInputDefault.value = emailStorage;\n  }\n  if (!!messageStorage) {\n    MessageInputDeafult.value = messageStorage;\n  }\n}\nfunction valueHandler() {\n\n  const dataToSave = {\n    email: EmailInputDefault.value,\n    message: MessageInputDeafult.value,\n  };\n\n  setLocalStorage(dataToSave);\n  emailStorage = dataToSave.email;\n  messageStorage = dataToSave.message;\n}\n\nfunction formSubmit(event) {\n  event.preventDefault();\n  event.currentTarget.reset();\n  //localStorage.removeItem(KEY_LOCAL_STORAGE);\n  console.log(\n    `to jest mail: ${emailStorage}, \\nto jest wiadomość: ${messageStorage}, \\nobiekt: ${localStorage.getItem(\n      KEY_LOCAL_STORAGE\n    )} `\n  );\n  localStorage.clear();\n}\n\nform.addEventListener('input', throttle(valueHandler, 500));\nform.addEventListener('submit', formSubmit);\n\n/*\nW HTML znajduje się znacznik formularza. Napisz skrypt, który będzie zapisywał wartości pól w local storage, gdy użytkownik coś wpisuje.\n\n<form class=\"feedback-form\" autocomplete=\"off\">\n  <label>\n    Email\n    <input type=\"email\" name=\"email\" autofocus />\n  </label>\n  <label>\n    Message\n    <textarea name=\"message\" rows=\"8\"></textarea>\n  </label>\n  <button type=\"submit\">Submit</button>\n</form>\n\nWykonuj to zadanie w plikach 03-feedback.html i 03-feedback.js. Rozbij je na kilka podzadań:\n\nŚledź w formularzu zdarzenie input, i za każdym razem zapisuj w local storage obiekt z polami email i message, w których przechowuj aktualne wartości pól formularza. Niech kluczem do storage będzie \"feedback-form-state\".\nPodczas przeładowywania strony sprawdzaj stan storage i jeśli są tam zapisane dane, wypełniaj nimi pola formularza. W przeciwnym wypadku pola powinny być puste.\nPo wysłaniu formularza wyczyść storage i pola formularza, a także wprowadź obiekt z polami email, message i ich aktualnymi wartościami do wiersza poleceń.\nZrób tak, aby storage aktualizował się nie częściej niż raz na 500 milisekund. Aby to zrobić, użyj biblioteki lodash.throttle i dodaj ją do projektu\n*/\n"],"names":["$b00c40859be242c5$var$emailStorage","$b00c40859be242c5$var$messageStorage","$eaxEB","parcelRequire","$b00c40859be242c5$var$KEY_LOCAL_STORAGE","$b00c40859be242c5$var$form","document","querySelector","$b00c40859be242c5$var$EmailInputDefault","$b00c40859be242c5$var$MessageInputDeafult","$b00c40859be242c5$var$getLocalStorage","key","valueSaved","localStorage","getItem","undefined","JSON","parse","error","console","message","email","value","addEventListener","$parcel$interopDefault","dataToSave","valueToSave","stringify","setItem","$b00c40859be242c5$var$setLocalStorage","event","preventDefault","currentTarget","reset","log","concat","clear"],"version":3,"file":"03-feedback.dae4a47b.js.map"}